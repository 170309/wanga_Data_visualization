<DIV id="individualHtml" >
    <div class="content">
        <div class="content-header">
            <div class="leftside-content-header">
                <ul class="breadcrumbs">
                    <li><i class="fa fa-pie-chart" aria-hidden="true"></i><a href="#" onclick="loadpage('WAIndex');">首页</a></li>
                    <li><a>某单位</a></li>
                </ul>
            </div>
        </div>
        <div class="animated fadeInUp" >
            <div class="col-sm-12">
                <div class="panel-content">
                    <div class="row pt-md">
                        <div class="col-md-6 col-lg-4">
                            <div class="profile-photo">
                                <img alt="Jane Doe" src="images/8.jpeg" />
                            </div>
                            <div class="user-header-info">
                                <h2 class="user-name">Jane Doe</h2>
                                <h5 class="user-position">管理员</h5>
                                <div class="user-social-media">
                                    <span class="text-lg">
                                        <h5 class="color-primary"><li  class="fa fa-phone-square">13024484956</li></h5>
                                        <h5 class="color-primary"><a href="#" class="fa fa-eye">待办（0）</a></h5>
                                        <h5 class="color-primary"><a href="#" class="fa fa-tag">信息（0）</a></h5>
                                    </span>
                                </div>
                            </div>
                        </div>
                         <div class="col-sm-4 col-lg-2" style="width:15%">
                            <div class="panel widgetbox wbox-3 bg-warning">
                                <a href="#">
                                    <div class="panel-content">
                                        <span class="icon fa fa-exclamation "></span>
                                        <h1 class="title">当前漏洞</h1>
                                        <h4 class="title color-darker-3">7</h4>

                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-sm-4 col-lg-2" style="width:15%">
                            <div class="panel widgetbox wbox-3 bg-danger">
                                <a href="#">
                                    <div class="panel-content">
                                        <span class="icon fa fa-warning"></span>
                                        <h1 class="title">当前恶意代码</h1>
                                        <h4 class="title color-darker-3">16</h4>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4" style="margin-left: 42px;">
                            <div class="panel b-primary bt-md">
                                <h4 class="mb-md">分析报告 </h4>
                                <ul class="list-unstyled ml-sm">
                                    <li>
                                        <h6><i class="mr-sm fa fa-book"></i>	信息安全周报(2017年第18期 总第371期) 2017-5-8</h6>
                                    </li>
                                    <li>
                                        <h6><i class="mr-sm fa fa-book"></i>	信息安全周报(2017年第17期 总第370期) 2017-5-2</h6>
                                    </li>
                                    <li>
                                        <h6><i class="mr-sm fa fa-book"></i>	信息安全周报(2017年第16期 总第369期) 2017-4-24</h6>
                                    </li>
                                    <li>
                                        <h6><i class="mr-sm fa fa-book"></i>	信息安全周报(2017年第15期 总第368期) 2017-4-18</h6>
                                    </li>
                                    <li>
                                        <h6>……</h6>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-8">
                <div class="panel-group faq-accordion" id="accordion_faq">
                    <div class="tabs tabs-vertical tabs-left ">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#bar_individual" data-toggle="tab">数据统计</a></li>
                            <li><a href="#messages3" data-toggle="tab">数据列表</a></li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="bar_individual" style="height:75%; width: 100%;">

                            </div>
                            <div class="tab-pane fade" id="messages3" style="height:75%; width: 100%;">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>感染地址</th>
                                            <th>漏洞名称(编号)</th>
                                            <th>漏洞级别(状态)</th>
                                            <th>发布日期</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>210.26.216.131</td>
                                            <td>GNU C Library 安全漏洞<BR/>(CNNVD-201705-319)</td>
                                            <td>低（已处理）</td>
                                            <td>2017-05-08</td>
                                        </tr>
                                        <tr>
                                            <td>210.26.216.132</td>
                                            <td>Citrix XenMobile Server 安全漏洞<BR/>(CNNVD-201705-318)</td>
                                            <td>低（已处理）</td>
                                            <td>2017-05-08</td>
                                        </tr>
                                        <tr>
                                            <td>210.26.216.133</td>
                                            <td>Trend Micro OfficeScan 跨站脚本漏洞<BR>(CNNVD-201705-317)</td>
                                            <td>中（已处理）</td>
                                            <td>2017-05-08</td>
                                        </tr>
                                        <tr>
                                            <td>210.26.216.134</td>
                                            <td>IBM WebSphere Portal 安全漏洞<BR>(CNNVD-201705-316)</td>
                                            <td>中（已处理）</td>
                                            <td>2017-05-08</td>
                                        </tr>
                                        <tr>
                                            <td>210.26.216.140</td>
                                            <td>IBM WebSphere Cast Iron Solution 安全漏洞<BR>(CNNVD-201705-315)</td>
                                            <td>低（已处理）</td>
                                            <td>2017-05-08</td>
                                        </tr>
                                        <tr style=" color:red">
                                            <td>www.xx.com</td>
                                            <td>flatCore SQL注入漏洞<BR>(CNNVD-201704-816)</td>
                                            <td >高（未处理）</td>
                                            <td>2017-04-28</td>
                                        </tr>
                                        <tr>
                                            <td>210.26.216.160</td>
                                            <td>IBM Tivoli Storage Manager 安全漏洞<BR>(CNNVD-201705-313)</td>
                                            <td>低（已处理）</td>
                                            <td>2017-05-08</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div> 
                </div>
            </div>
            <div class="col-sm-12 col-md-4">
                <div class="panel b-primary bt-md">
                    <div class="panel-content" style="height:50%; width: 100%;" id="pie_individual">

                    </div>
                </div>
                <div class="panel b-primary bt-md">
                    <h4 class="mb-md">预警通报 </h4>
                    <ul class="list-unstyled ml-sm">
                        <li>
                            <h6><i class="mr-sm fa fa-exclamation"></i>有关Linux内核远程代码执行漏洞情况的通报 2017-4-14</h6>
                        </li>
                        <li>
                            <h6><i class="mr-sm fa fa-exclamation"></i>【漏洞预警】关于多个微软产品漏洞的通报 2017-4-17</h6>
                        </li>
                        <li>
                            <h6><i class="mr-sm fa fa-exclamation"></i>有关Microsoft IIS 缓冲区错误漏洞情况的通报 2017-3-28</h6>
                        </li>
                        <li>
                            <h6><i class="mr-sm fa fa-exclamation"></i>有关火狐浏览器（Mozilla Firefox）漏洞情况的通报 2017-3-24</h6>
                        </li>
                        <li>
                            <h6>……</h6>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    barView_individual();
    function barView_individual() {
        var bdjson = {"success": true, "title": "漏洞统计分析", "subtext": "(按漏洞等级分类)", "avgRange": 1000,
            "data": [{"name": "低危漏洞", "value": 3}, {"name": "高危漏洞", "value": 1}, {"name": "中危漏洞", "value": 2}
            ]};
        var data = getUnmarshallData(bdjson.data, bdjson.title);
        var legendData = [];
        var xAxisData = [];
        var seriesData = [];
        if (data !== null && data["series"].length > 0) {
            legendData = data["legen"];
            xAxisData = data["axis"];
            for (var i = 0, len = data["series"].length; i < len; i++) {
                seriesData.push({
                    "name": legendData[i],
                    "type": "bar",
                    barWidth: 30,
                    "data": data["series"][i],
                    itemStyle: {
                        normal: {
                            label: {
                                show: true
                            }
                        }
                    }
                });
            }
        }
        require.config({
            paths: {
                echarts: 'js/echarts/graph' //引用资源文件夹路径，注意路径
            }
        });
        require(
                [
                    'echarts',
                    'echarts/chart/bar',
                    'echarts/chart/line'
                ],
                function(ec) {
                    // 找到div容器，初始化echarts图表
                    var myChart = ec.init(document.getElementById("bar_individual"));
                    var option = {
                        title: {
                            text: bdjson.title,
                            subtext: bdjson.subtext
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data: legendData
                        },
                        toolbox: {
                            show: true,
                            feature: {
                                dataView: {show: true, readOnly: false},
                                magicType: {show: true, type: ['line', 'bar']},
                                restore: {show: true},
                                saveAsImage: {show: true}
                            }
                        },
                        calculable: true,
                        xAxis: [
                            {
                                type: 'category',
                                data: xAxisData,
                                axisLabel: {
                                    show: true,
                                    interval: 'auto',
//                                    rotate: -30, //-30度角倾斜显示
                                    textStyle: {
                                        fontSize: '14',
                                        fontFamily: 'verdana'
                                    }
                                }
                            }
                        ],
                        yAxis: [
                            {
                                type: 'value'

                            }
                        ],
                        series: seriesData
                    };
                    myChart.setOption(option);
                }
        );
    }
    pieView_individual();
    function pieView_individual() {
        var bdjson = {"success": true, "title": "漏洞统计分析", "subtext": "(按漏洞类型统计)", "avgRange": 1000,
            "data": [
//                {"name": "资料不足", "value": 0},
                {"name": "输入验证", "value": 1},
                {"name": "权限许可和访问控制", "value": 1},
                {"name": "sql注入", "value": 1},
                {"name": "缓冲区溢出", "value": 2},
                {"name": "跨站脚本", "value": 1}
            ]};
        var data = getUnmarshallData(bdjson.data, bdjson.title);
        var xAxisData = data["axis"];
        //折线区域图
        require.config({
            paths: {
                echarts: 'js/echarts/graph' //引用资源文件夹路径，注意路径
            }
        });
        require(
                [
                    'echarts',
                    'echarts/chart/pie'
                ],
                function(ec) {
                    var mychar = ec.init(document.getElementById('pie_individual'));
                    var option = {
                        title: {
                            text: bdjson.title,
                            subtext: bdjson.subtext
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: "{b} : {c}({d}%)"
                        },
                        legend: {
                            show: true,
                            orient: 'vertical',
                            x: 'right',
                            y: '50px',
                            data: xAxisData
                        },
                        toolbox: {
                            show: true,
                            feature: {
                                dataView: {show: true, readOnly: false},
                                magicType: {
                                    show: true,
                                    type: ['pie']
                                },
                                restore: {show: true},
                                saveAsImage: {show: true}
                            }
                        },
                        calculable: true,
                        series: [
                            {
                                name: '',
                                type: 'pie',
                                radius: ['0', '90%'],
                                itemStyle: {
                                    normal: {
                                        label: {
                                            position: 'inner',
                                            formatter: '{d}%',
                                            textStyle: {
                                                fontSize: '14',
                                                fontWeight: 'bold'
                                            }
                                        },
                                        labelLine: {
                                            show: false
                                        }
                                    }
                                },
                                data: bdjson.data
                            }
                        ]
                    };
                    //配置图表设置并读取
                    mychar.setOption(option);
                }
        );
    }
</script>